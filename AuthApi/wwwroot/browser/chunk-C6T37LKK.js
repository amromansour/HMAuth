import{c as S,f as v}from"./chunk-ZRCRG42Q.js";import{f as y,g as x,i as O,k as L,l as j,m as N,n as I,o as T,q as k}from"./chunk-G6CTQTY5.js";import"./chunk-HCASDCFM.js";import"./chunk-FPPZ4BUR.js";import{$a as w,Aa as h,Ea as b,Oa as m,Pa as t,Q as f,Qa as o,Ra as M,Wa as _,Ya as C,_a as s,ab as P,bb as d,cb as p,db as c,qa as a,wa as u}from"./chunk-NEK5CHBZ.js";function R(l,e){if(l&1&&(t(0,"p",11),s(1),o()),l&2){let i=C();a(),w(i.errorMessage)}}var E=class l{constructor(e){this.authService=e}errorMessage="";loading=!1;loginobj={username:"",password:""};router=f(S);login(){this.loading=!0,this.errorMessage="",this.authService.login({UserName:this.loginobj.username,Password:this.loginobj.password}).subscribe({next:e=>{if(this.loading=!1,e._ResponseCode===200&&e.data?.accessToken){let{accessToken:i,refreshToken:n,userName:g}=e.data;this.authService.saveToken(i),this.authService.saveRefreshToken(n),alert(`Welcome, ${g}!`),this.router.navigate(["/"])}else this.errorMessage=e.message||"Login failed"},error:e=>{this.loading=!1,console.error("Login error:",e),e.status===0?this.errorMessage="Cannot connect to server. Please try again later.":this.errorMessage=e.error?.message||"Invalid credentials"}})}static \u0275fac=function(i){return new(i||l)(u(v))};static \u0275cmp=h({type:l,selectors:[["app-login"]],decls:16,vars:5,consts:[[1,"form-signin"],[3,"ngSubmit"],["src","/assets/user_6543046.png","alt","","width","72",1,"mb-4"],[1,"h3","mb-3","fw-normal"],[1,"form-floating"],["type","email","name","username","id","floatingInput","placeholder","name@example.com",1,"form-control",3,"ngModelChange","ngModel"],["for","floatingInput"],["type","password","name","password","id","floatingPassword","placeholder","Password",1,"form-control",3,"ngModelChange","ngModel"],["for","floatingPassword"],["type","submit",1,"w-100","btn","btn-lg","btn-primary",3,"disabled"],["class","error",4,"ngIf"],[1,"error"]],template:function(i,n){i&1&&(t(0,"main",0)(1,"form",1),_("ngSubmit",function(){return n.login()}),M(2,"img",2),t(3,"h1",3),s(4,"Please sign in"),o(),t(5,"div",4)(6,"input",5),c("ngModelChange",function(r){return p(n.loginobj.username,r)||(n.loginobj.username=r),r}),o(),t(7,"label",6),s(8,"Email address"),o()(),t(9,"div",4)(10,"input",7),c("ngModelChange",function(r){return p(n.loginobj.password,r)||(n.loginobj.password=r),r}),o(),t(11,"label",8),s(12,"Password"),o()(),t(13,"button",9),s(14),o(),b(15,R,2,1,"p",10),o()()),i&2&&(a(6),d("ngModel",n.loginobj.username),a(4),d("ngModel",n.loginobj.password),a(3),m("disabled",n.loading),a(),P(" ",n.loading?"Logging in...":"Login"," "),a(),m("ngIf",n.errorMessage))},dependencies:[k,T,O,L,j,I,N,x,y],styles:["html[_ngcontent-%COMP%], body[_ngcontent-%COMP%]{height:100%}body[_ngcontent-%COMP%]{display:flex;align-items:center;padding-top:40px;padding-bottom:40px;background-color:#f5f5f5}.form-signin[_ngcontent-%COMP%]{width:100%;max-width:330px;padding:15px;margin:auto}.form-signin[_ngcontent-%COMP%]   .checkbox[_ngcontent-%COMP%]{font-weight:400}.form-signin[_ngcontent-%COMP%]   .form-floating[_ngcontent-%COMP%]:focus-within{z-index:2}.form-signin[_ngcontent-%COMP%]   input[type=email][_ngcontent-%COMP%]{margin-bottom:-1px;border-bottom-right-radius:0;border-bottom-left-radius:0}.form-signin[_ngcontent-%COMP%]   input[type=password][_ngcontent-%COMP%]{margin-bottom:10px;border-top-left-radius:0;border-top-right-radius:0}.bd-placeholder-img[_ngcontent-%COMP%]{font-size:1.125rem;text-anchor:middle;-webkit-user-select:none;-moz-user-select:none;user-select:none}@media (min-width: 768px){.bd-placeholder-img-lg[_ngcontent-%COMP%]{font-size:3.5rem}}button[_ngcontent-%COMP%]:disabled{background-color:#ccc}.error[_ngcontent-%COMP%]{color:red;text-align:center;margin-top:10px}"]})};export{E as Login};
